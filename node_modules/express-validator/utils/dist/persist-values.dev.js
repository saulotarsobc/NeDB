"use strict";

var _ = require('lodash');

module.exports = function (req, fieldInstances) {
  fieldInstances.filter(function (instance) {
    var initialValue = _.get(req[instance.location], instance.path);

    return initialValue !== instance.value;
  }).forEach(function (instance) {
    instance.path === '' ? _.set(req, instance.location, instance.value) : _.set(req[instance.location], instance.path, instance.value);
  });
};